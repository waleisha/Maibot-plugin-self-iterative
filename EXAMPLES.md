# ä½¿ç”¨ç¤ºä¾‹

## ç¤ºä¾‹1: ä¼˜åŒ–æ—¥å¿—è¾“å‡º

### ç”¨æˆ·è¾“å…¥

```
éº¦éº¦ï¼Œä¼˜åŒ–ä¸€ä¸‹ä½ çš„æ—¥å¿—è¾“å‡ºï¼Œè®©å®ƒæ›´ç®€æ´ä¸€äº›
```

### AIçš„å¤„ç†æµç¨‹

1. **è¯»å–ç›¸å…³ä»£ç **
   ```
   AIè°ƒç”¨ read_file å·¥å…·
   - file_path: "src/common/logger.py"
   - offset: 1
   - limit: 100
   ```

2. **åˆ†æå¹¶ç”Ÿæˆä¿®æ”¹**
   ```python
   # AIåˆ†æç°æœ‰ä»£ç ï¼Œç”Ÿæˆä¼˜åŒ–ç‰ˆæœ¬
   # ä¾‹å¦‚ï¼šæ·»åŠ æ—¥å¿—çº§åˆ«è¿‡æ»¤ã€ç®€åŒ–æ ¼å¼ç­‰
   ```

3. **æäº¤ä¿®æ”¹**
   ```
   AIè°ƒç”¨ self_iterate å·¥å…·
   - target_path: "src/common/logger.py"
   - modification_description: "ä¼˜åŒ–æ—¥å¿—è¾“å‡ºæ ¼å¼ï¼Œä½¿å…¶æ›´ç®€æ´"
   - new_content: "...ä¼˜åŒ–åçš„ä»£ç ..."
   ```

4. **é€šçŸ¥ç”¨æˆ·**
   ```
   âœ… è‡ªæˆ‘è¿­ä»£ä»»åŠ¡å·²åˆ›å»º
   
   ğŸ†” è¿­ä»£ID: 20250221_143022
   ğŸ“ ç›®æ ‡æ–‡ä»¶: src/common/logger.py
   ğŸ“ ä¿®æ”¹æè¿°: ä¼˜åŒ–æ—¥å¿—è¾“å‡ºæ ¼å¼ï¼Œä½¿å…¶æ›´ç®€æ´
   
   ğŸ“Š å·®å¼‚æŠ¥å‘Š: ...
   
   â³ ç­‰å¾…ç®¡ç†å‘˜å®¡æ ¸
   ç®¡ç†å‘˜å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤:
   â€¢ /approve - å®¡æ ¸é€šè¿‡å¹¶åº”ç”¨ä¿®æ”¹
   â€¢ /reject - æ‰“å›ä¿®æ”¹
   ```

5. **ç®¡ç†å‘˜å®¡æ ¸**
   ```
   ç®¡ç†å‘˜: /diff
   AI: æ˜¾ç¤ºä»£ç å·®å¼‚
   
   ç®¡ç†å‘˜: /approve
   AI: âœ… ä¿®æ”¹å·²åº”ç”¨
   ```

## ç¤ºä¾‹2: ä¿®å¤Bug

### ç”¨æˆ·è¾“å…¥

```
éº¦éº¦ï¼Œä¿®å¤ä¸€ä¸‹ src/utils/helper.py ç¬¬50è¡Œçš„é‚£ä¸ªç´¢å¼•è¶Šç•Œbug
```

### AIçš„å¤„ç†æµç¨‹

1. **è¯»å–ç›¸å…³ä»£ç **
   ```
   AIè°ƒç”¨ read_file å·¥å…·
   - file_path: "src/utils/helper.py"
   - offset: 40
   - limit: 30
   ```

2. **åˆ†æé—®é¢˜**
   ```python
   # åŸä»£ç ï¼ˆç¬¬50è¡Œé™„è¿‘ï¼‰
   def process_list(data):
       result = []
       for i in range(len(data) + 1):  # é—®é¢˜ï¼š+1 å¯¼è‡´è¶Šç•Œ
           result.append(data[i])  # è¿™é‡Œä¼šè¶Šç•Œ
       return result
   ```

3. **ç”Ÿæˆä¿®å¤**
   ```python
   # ä¿®å¤åçš„ä»£ç 
   def process_list(data):
       result = []
       for i in range(len(data)):  # ä¿®å¤ï¼šå»æ‰ +1
           result.append(data[i])
       return result
   ```

4. **æäº¤ä¿®æ”¹**
   ```
   AIè°ƒç”¨ self_iterate å·¥å…·æäº¤ä¿®å¤
   ```

## ç¤ºä¾‹3: æ·»åŠ æ–°åŠŸèƒ½

### ç”¨æˆ·è¾“å…¥

```
éº¦éº¦ï¼Œç»™æ¶ˆæ¯å¤„ç†å™¨æ·»åŠ ä¸€ä¸ªæ¶ˆæ¯é•¿åº¦é™åˆ¶åŠŸèƒ½ï¼Œè¶…è¿‡500å­—ç¬¦å°±æˆªæ–­
```

### AIçš„å¤„ç†æµç¨‹

1. **è¯»å–ç°æœ‰ä»£ç **
   ```
   AIè°ƒç”¨ read_file å·¥å…·
   - file_path: "src/plugins/message_handler.py"
   ```

2. **åˆ†æä»£ç ç»“æ„**
   ```python
   # æ‰¾åˆ°æ¶ˆæ¯å¤„ç†çš„æ ¸å¿ƒå‡½æ•°
   async def handle_message(message):
       # ç°æœ‰é€»è¾‘...
       pass
   ```

3. **æ·»åŠ æ–°åŠŸèƒ½**
   ```python
   async def handle_message(message):
       # æ·»åŠ æ¶ˆæ¯é•¿åº¦é™åˆ¶
       MAX_LENGTH = 500
       if len(message.content) > MAX_LENGTH:
           message.content = message.content[:MAX_LENGTH] + "..."
       
       # åŸæœ‰é€»è¾‘...
   ```

4. **æäº¤ä¿®æ”¹**
   ```
   AIè°ƒç”¨ self_iterate å·¥å…·æäº¤ä¿®æ”¹
   ```

## ç¤ºä¾‹4: é‡æ„ä»£ç 

### ç”¨æˆ·è¾“å…¥

```
éº¦éº¦ï¼Œé‡æ„ä¸€ä¸‹ src/plugins/example.pyï¼ŒæŠŠé‚£ä¸ªé•¿å‡½æ•°æ‹†åˆ†æˆå¤šä¸ªå°å‡½æ•°
```

### AIçš„å¤„ç†æµç¨‹

1. **è¯»å–ä»£ç **
   ```
   AIè°ƒç”¨ read_file å·¥å…·è¯»å–æ•´ä¸ªæ–‡ä»¶
   ```

2. **åˆ†æå¹¶é‡æ„**
   ```python
   # é‡æ„å‰ï¼šä¸€ä¸ªé•¿å‡½æ•°
   def process_data(data):
       # 100+ è¡Œçš„å¤æ‚é€»è¾‘
       pass
   
   # é‡æ„åï¼šæ‹†åˆ†æˆå¤šä¸ªå°å‡½æ•°
   def validate_data(data):
       """éªŒè¯æ•°æ®"""
       pass
   
   def transform_data(data):
       """è½¬æ¢æ•°æ®"""
       pass
   
   def save_data(data):
       """ä¿å­˜æ•°æ®"""
       pass
   
   def process_data(data):
       """ä¸»å¤„ç†å‡½æ•°"""
       validate_data(data)
       transform_data(data)
       save_data(data)
   ```

3. **æäº¤ä¿®æ”¹**
   ```
   AIè°ƒç”¨ self_iterate å·¥å…·æäº¤é‡æ„åçš„ä»£ç 
   ```

## ç¤ºä¾‹5: ä½¿ç”¨å‘½ä»¤æ‰‹åŠ¨ç®¡ç†

### æŸ¥çœ‹çŠ¶æ€

```
ç”¨æˆ·: /status
AI: 
ğŸ“‹ è‡ªæˆ‘è¿­ä»£çŠ¶æ€

ğŸ“Š å½“å‰çŠ¶æ€: ğŸŸ¢ ç©ºé—²
ğŸ’¡ å¯ç”¨å‘½ä»¤:
â€¢ /iterate - å¯åŠ¨è¿­ä»£æµç¨‹
â€¢ /approve - å®¡æ ¸é€šè¿‡
â€¢ /reject - æ‰“å›ä¿®æ”¹
â€¢ /diff - æŸ¥çœ‹å·®å¼‚
â€¢ /rollback - å›æ»šç‰ˆæœ¬
â€¢ /backups - æŸ¥çœ‹å¤‡ä»½åˆ—è¡¨
```

### å¯åŠ¨è¿­ä»£

```
ç”¨æˆ·: /iterate ä¼˜åŒ–é”™è¯¯å¤„ç†
AI:
ğŸš€ è‡ªæˆ‘è¿­ä»£æµç¨‹å·²å¯åŠ¨

ğŸ¯ ç›®æ ‡: ä¼˜åŒ–é”™è¯¯å¤„ç†

ğŸ’¡ ä½ å¯ä»¥è¿™æ ·è·Ÿæˆ‘è¯´:
â€¢ "å¸®æˆ‘ä¼˜åŒ–ä¸€ä¸‹é”™è¯¯å¤„ç†é€»è¾‘"
â€¢ "æŸ¥çœ‹ä¸€ä¸‹src/utils/error.pyï¼Œæ·»åŠ æ›´è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯"

ğŸ¤– AIä¼šè‡ªåŠ¨è°ƒç”¨å·¥å…·æ¥è¯»å–ã€åˆ†æå’Œä¿®æ”¹ä»£ç ã€‚
```

### æŸ¥çœ‹å·®å¼‚

```
ç”¨æˆ·: /diff
AI:
ğŸ“Š å¾…å®¡æ ¸æ–‡ä»¶çš„å·®å¼‚æŠ¥å‘Š

src/utils/error.py:
```diff
--- a/src/utils/error.py
+++ b/src/utils/error.py
@@ -10,7 +10,12 @@
 def handle_error(e):
-    logger.error(f"Error: {e}")
+    logger.error(f"Error occurred: {type(e).__name__}")
+    logger.error(f"Message: {str(e)}")
+    import traceback
+    logger.error(f"Traceback: {traceback.format_exc()}")
     return {"error": str(e)}
```
```

### å®¡æ ¸é€šè¿‡

```
ç”¨æˆ·: /approve
AI:
âœ… ä¿®æ”¹å·²åº”ç”¨

ğŸ†” è¿­ä»£ID: 20250221_143022
ğŸ‘¤ å®¡æ ¸è€…: 123456789
ğŸ• æ—¶é—´: 2025-02-21 14:30:22

ğŸ“ å·²åº”ç”¨çš„æ–‡ä»¶:
â€¢ src/utils/error.py

ğŸ’¾ å¤‡ä»½æ–‡ä»¶:
â€¢ storage/.backups/src_utils_error.py.20250221_143022.bak

âš ï¸ æ³¨æ„: éƒ¨åˆ†ä¿®æ”¹å¯èƒ½éœ€è¦é‡å¯MaiBotæ‰èƒ½ç”Ÿæ•ˆã€‚
ğŸ’¡ ä½¿ç”¨ /rollback å¯ä»¥å›æ»šåˆ°ä¹‹å‰çš„ç‰ˆæœ¬ã€‚
```

### å›æ»šç‰ˆæœ¬

```
ç”¨æˆ·: /backups
AI:
ğŸ“‹ å¤‡ä»½åˆ—è¡¨ (å…± 5 ä¸ª)

1. 20250221_143022
   ğŸ“ src/utils/error.py
   ğŸ“ 2.5 KB

2. 20250220_091530
   ğŸ“ src/plugins/message.py
   ğŸ“ 5.1 KB

ğŸ’¡ ä½¿ç”¨ /rollback <æ—¶é—´æˆ³> å›æ»šåˆ°æŒ‡å®šç‰ˆæœ¬ã€‚

ç”¨æˆ·: /rollback 20250221_143022
AI:
ğŸ”„ å›æ»šæˆåŠŸ

ğŸ“ ç›®æ ‡æ–‡ä»¶: src/utils/error.py
ğŸ’¾ å¤‡ä»½æ–‡ä»¶: src_utils_error.py.20250221_143022.bak
ğŸ• å›æ»šæ—¶é—´: 2025-02-21 15:00:00

âš ï¸ æ³¨æ„: éƒ¨åˆ†ä¿®æ”¹å¯èƒ½éœ€è¦é‡å¯MaiBotæ‰èƒ½ç”Ÿæ•ˆã€‚
```

## ç¤ºä¾‹6: æ‰§è¡Œç»ˆç«¯å‘½ä»¤

### å®‰è£…ä¾èµ–

```
ç”¨æˆ·: éº¦éº¦ï¼Œå¸®æˆ‘å®‰è£…ä¸€ä¸‹ requests åº“
AI:
æˆ‘ä¼šå¸®ä½ å®‰è£… requests åº“ã€‚

AIè°ƒç”¨ execute_terminal å·¥å…·
- command: "pip install requests"
- timeout: 60

ğŸ“Ÿ å‘½ä»¤: pip install requests
ğŸ“‚ å·¥ä½œç›®å½•: /path/to/MaiBot
ğŸ”¢ è¿”å›ç : 0
==================================================
ğŸ“¤ æ ‡å‡†è¾“å‡º:
Collecting requests
  Downloading requests-2.31.0-py3-none-any.whl (62 kB)
Installing collected packages: requests
Successfully installed requests-2.31.0

âœ… å®‰è£…æˆåŠŸï¼
```

### æŸ¥çœ‹GitçŠ¶æ€

```
ç”¨æˆ·: éº¦éº¦ï¼ŒæŸ¥çœ‹ä¸€ä¸‹gitçŠ¶æ€
AI:
ğŸ“Ÿ å‘½ä»¤: git status
ğŸ“‚ å·¥ä½œç›®å½•: /path/to/MaiBot
ğŸ”¢ è¿”å›ç : 0
==================================================
ğŸ“¤ æ ‡å‡†è¾“å‡º:
On branch main
Your branch is up to date with 'origin/main'.

nothing to commit, working tree clean
```

## æœ€ä½³å®è·µ

### 1. å°æ­¥å¿«è·‘

æ¯æ¬¡åªä¿®æ”¹ä¸€ä¸ªåŠŸèƒ½ç‚¹ï¼Œè¿™æ ·æ›´å®¹æ˜“å®¡æ ¸å’Œå›æ»šã€‚

### 2. å…ˆæŸ¥çœ‹å†ä¿®æ”¹

è®©AIå…ˆè¯»å–ä»£ç ï¼Œç†è§£ç°æœ‰é€»è¾‘åå†è¿›è¡Œä¿®æ”¹ã€‚

### 3. ä»”ç»†å®¡æ ¸

ä½¿ç”¨ `/diff` å‘½ä»¤ä»”ç»†æŸ¥çœ‹ä¿®æ”¹å†…å®¹ï¼Œç¡®ä¿æ²¡æœ‰å¼•å…¥æ–°çš„é—®é¢˜ã€‚

### 4. åŠæ—¶å¤‡ä»½

é‡è¦çš„ä¿®æ”¹å‰å…ˆæ‰‹åŠ¨å¤‡ä»½ï¼Œæˆ–è€…ä¾èµ–æ’ä»¶çš„è‡ªåŠ¨å¤‡ä»½åŠŸèƒ½ã€‚

### 5. æµ‹è¯•éªŒè¯

ä¿®æ”¹åè¦è¿›è¡Œå……åˆ†çš„æµ‹è¯•ï¼Œç¡®ä¿åŠŸèƒ½æ­£å¸¸ã€‚

## æ³¨æ„äº‹é¡¹

1. **ä¸è¦ä¿®æ”¹æ•æ„Ÿæ–‡ä»¶**: é¿å…ä¿®æ”¹åŒ…å«å¯†ç ã€tokenç­‰æ•æ„Ÿä¿¡æ¯çš„æ–‡ä»¶
2. **è¯­æ³•æ£€æŸ¥**: æ’ä»¶ä¼šè‡ªåŠ¨æ£€æŸ¥Pythonè¯­æ³•ï¼Œä½†é€»è¾‘é”™è¯¯éœ€è¦äººå·¥å‘ç°
3. **é‡å¯ç”Ÿæ•ˆ**: éƒ¨åˆ†ä¿®æ”¹å¯èƒ½éœ€è¦é‡å¯MaiBotæ‰èƒ½å®Œå…¨ç”Ÿæ•ˆ
4. **æƒé™æ§åˆ¶**: åªæœ‰ç®¡ç†å‘˜æ‰èƒ½æ‰§è¡Œå®¡æ ¸å‘½ä»¤
