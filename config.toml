# MaiBot 自我迭代插件配置文件
# 版本: 2.1.0

[plugin]
config_version = "2.1.0"
enabled = true

[security]
# 超级管理员QQ号列表 - 只有这些用户才能执行管理命令
admin_qqs = [123456789]

# 允许读取的路径白名单（相对于MaiBot根目录）
# 注意: 这里包含 src 目录，允许AI读取和修改MaiBot核心代码
allowed_read_paths = [
    "src",
    "plugins",
    "maibot_plugin_self_iterative"
]

# 允许修改的路径白名单（相对于MaiBot根目录）
# 注意: 这里包含 src 目录，允许AI修改MaiBot核心代码
allowed_write_paths = [
    "src",
    "plugins",
    "maibot_plugin_self_iterative"
]

# 禁止访问的文件模式（正则表达式）
forbidden_patterns = [
    ".*\\.env.*",
    ".*token.*",
    ".*password.*",
    ".*secret.*",
    ".*credential.*",
    ".*api_key.*",
    ".*private.*"
]

# 允许的终端命令
allowed_commands = [
    "pip",
    "python",
    "python3",
    "git",
    "ls",
    "cat",
    "echo",
    "mkdir",
    "touch",
    "cp",
    "mv",
    "find",
    "grep",
    "head",
    "tail",
    "wc",
    "diff"
]

# 禁止的终端命令
forbidden_commands = [
    "rm -rf /",
    "rm -rf /*",
    "dd if=/dev/zero",
    ":(){ :|:& };:",
    "> /dev/sda",
    "mkfs",
    "fdisk",
    "format"
]

[iteration]
# 影子工作区路径（相对于插件目录）
shadow_workspace_path = "storage/.shadow"

# 备份路径（相对于插件目录）
backup_path = "storage/.backups"

# 最大备份数量
max_backups = 50

# 是否启用AST语法检查
enable_syntax_check = true

# 是否启用差异报告
enable_diff_report = true

# 审核超时时间（秒）
approval_timeout = 300

# 重启前等待时间（秒）
restart_delay = 3

[llm]
# LLM提供商选择:
# - "default": 使用MaiBot框架本身的模型（默认）
# - "openai": OpenAI GPT系列
# - "anthropic": Claude系列
# - "google": Gemini系列
# - "moonshot": Kimi系列
# - "deepseek": DeepSeek系列
provider = "default"

# 温度参数（0-1，越低越保守）
temperature = 0.3

# 最大token数
max_tokens = 4096

[llm.openai]
# OpenAI配置
model = "gpt-4o"
api_key = ""  # 或设置环境变量 OPENAI_API_KEY
base_url = "https://api.openai.com/v1"  # 可替换为代理地址

[llm.anthropic]
# Anthropic Claude配置
model = "claude-3-5-sonnet-20241022"
api_key = ""  # 或设置环境变量 ANTHROPIC_API_KEY
base_url = "https://api.anthropic.com/v1"

[llm.google]
# Google Gemini配置
model = "gemini-2.0-flash-exp"
api_key = ""  # 或设置环境变量 GOOGLE_API_KEY

[llm.moonshot]
# Moonshot Kimi配置
model = "kimi-latest"
api_key = ""  # 或设置环境变量 MOONSHOT_API_KEY
base_url = "https://api.moonshot.cn/v1"

[llm.deepseek]
# DeepSeek配置
model = "deepseek-coder"
api_key = ""  # 或设置环境变量 DEEPSEEK_API_KEY
base_url = "https://api.deepseek.com/v1"

[features]
# 是否启用LLM工具注入（核心功能）
enable_tool_inject = true

# 是否启用自动备份
enable_auto_backup = true

# 是否启用回滚功能
enable_rollback = true

[logging]
# 日志级别
level = "INFO"

# 是否记录工具调用
log_tool_calls = true

# 是否记录文件操作
log_file_operations = true
